<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>AI Log Analysis Dashboard</title>
    <link rel="stylesheet" href="/components/shared.css" />
    <link rel="stylesheet" href="/pages/dashboard/dashboard.css" />
  </head>
  <body>
    <!-- Header -->
    <header class="header">
      <div class="header-content">
        <div class="header-title">
          <h1>AI Log Analysis Dashboard</h1>
          <p>Real-time error detection and AI-powered solutions</p>
        </div>
      </div>
    </header>

    <!-- Main Container -->
    <main class="container">
      <!-- Control Panel Section with environment selector -->
      <section class="control-panel">
        <div class="control-group">
          <label for="env-selector">Select Environment:</label>
          <select id="env-selector" class="env-select">
            <option value="production">Production</option>
            <option value="staging" selected>Staging</option>
            <option value="development">Development</option>
          </select>
        </div>
        <button class="btn btn-primary" id="run-analysis-btn">
          <span class="btn-icon">âš¡</span>
          Run AI Analysis
        </button>
      </section>

      <!-- Filter Section -->
      <section class="filter-section">
        <div class="filter-wrapper">
          <label for="category-filter">Filter by Category:</label>
          <select id="category-filter" class="category-select">
            <option value="all">All Categories</option>
            <option value="Thread">Thread</option>
            <option value="Database">Database</option>
            <option value="Initialization">Initialization</option>
            <option value="Configuration">Configuration</option>
            <option value="Other">Other</option>
          </select>
        </div>
      </section>

      <!-- Logs List Section -->
      <section class="logs-section">
        <div class="logs-header">
          <h2>Error Logs</h2>
          <span class="error-count" id="error-count">Loading...</span>
        </div>
        <div class="logs-list" id="logs-list">
          <!-- Error cards will be rendered here by JavaScript in Phase 2 -->
        </div>
      </section>
    </main>

    <!-- Error Modal -->
    <div class="modal-backdrop" id="modal-backdrop"></div>
    <dialog class="error-modal" id="error-modal">
      <div class="modal-header">
        <h2 id="modal-title">Error Details</h2>
        <button class="modal-close" id="modal-close">&times;</button>
      </div>

      <div class="modal-content">
        <!-- Error Info -->
        <div class="modal-section">
          <div class="section-title">Error Information</div>
          <div class="error-info">
            <div class="info-row">
              <span class="label">Category:</span>
              <span id="modal-category" class="category-badge">-</span>
            </div>
            <div class="info-row">
              <span class="label">Severity:</span>
              <span id="modal-severity" class="severity-badge">-</span>
            </div>
            <div class="info-row">
              <span class="label">Timestamp:</span>
              <span id="modal-timestamp">-</span>
            </div>
            <div class="info-row">
              <span class="label">Error Code:</span>
              <span id="modal-error-code" class="code">-</span>
            </div>
          </div>
        </div>

        <!-- Stack Trace -->
        <div class="modal-section">
          <div class="section-title">Stack Trace</div>
          <pre class="stack-trace" id="modal-stack-trace">-</pre>
        </div>

        <!-- AI Solution -->
        <div class="modal-section">
          <div class="section-title">AI-Generated Solution</div>
          <p id="modal-solution">-</p>
        </div>

        <!-- Fix Steps -->
        <div class="modal-section">
          <div class="section-title">Step-by-Step Fix</div>
          <ol class="fix-steps" id="modal-fix-steps">
            <li>-</li>
          </ol>
        </div>

        <!-- Slack Integration -->
        <div class="modal-section slack-section">
          <div class="section-title">Slack Integration</div>
          <div class="slack-info">
            <p id="modal-slack-info">-</p>
            <div class="slack-actions">
              <button class="btn btn-secondary" id="copy-slack-btn">
                Copy Slack Thread Link
              </button>
              <button class="btn btn-primary" id="notify-slack-btn">
                Send to Slack
              </button>
            </div>
          </div>
        </div>
      </div>

      <div class="modal-footer">
        <button class="btn btn-secondary" id="modal-cancel">Close</button>
      </div>
    </dialog>

    <script src="/pages/dashboard/dashboard.js"></script>
  </body>
</html>
